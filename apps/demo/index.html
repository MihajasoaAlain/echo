<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Démo NotifBridge</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center h-screen">
    <div class="bg-white p-8 rounded-lg shadow-xl w-96">
        <h1 class="text-2xl font-bold mb-4">Mes Notifications</h1>
        <div id="status" class="text-sm text-gray-500 mb-4">Connexion en cours...</div>
        <div id="notifications-list" class="space-y-2">
            </div>
    </div>

    <script type="module">
        import { NotifBridge } from "notifbridge";

        const nb = new NotifBridge({
            url: "http://localhost:3000",
            userId: "user_test_123"
        });

        nb.connect();

        const list = document.getElementById('notifications-list');
        const status = document.getElementById('status');

        nb.onNotification((notif) => {
            status.innerText = "Connecté";
            const el = document.createElement('div');
            el.className = "p-3 bg-blue-50 border-l-4 border-blue-500 rounded animate-bounce";
            el.innerHTML = `<strong>${notif.title}</strong><p class="text-sm">${notif.message}</p>`;
            list.prepend(el);
        });
    </script>
</body>
</html>